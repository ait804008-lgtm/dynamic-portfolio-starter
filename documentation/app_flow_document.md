# App Flow Document for Dynamic Portfolio Starter

## Onboarding and Sign-In/Sign-Up
When a new visitor arrives at the application URL, they land on the public home page featuring the site header with links to Projects, Blog, Contact, and Admin. To gain access to the secure admin area, the user clicks the Admin link in the header. They are then taken to a sign-in page. On this page they enter their email address and password to log in. If the visitor does not yet have an account, they can switch to the sign-up tab on the same page, where they provide a valid email address, choose a password, and confirm the password. After successfully registering, the user is automatically signed in and redirected to the admin dashboard. If a returning user forgets their password, they can click the Forgot password link on the sign-in form. That link opens a password recovery page where they enter their email address. Upon submitting, the system sends a reset link to the provided email. The user follows the link to a reset-password form within the app, enters a new password and confirmation, and submits to complete the reset. After resetting, they can sign in with the new credentials. At any point when signed in, the user can sign out by clicking the profile menu in the top navigation and choosing Sign Out, which returns them to the public landing page. 

## Main Dashboard or Home Page
Once authenticated, the user is redirected to the admin dashboard located at the /admin route. The dashboard layout features a persistent sidebar on the left, listing links to Projects, Blog, and Settings. At the top, there is a header bar showing the site logo, a theme toggle button for light and dark modes, and a profile avatar menu that opens options for account settings and signing out. The main content area displays a welcome banner and high-level widgets such as counts of projects and blog posts. From this view, the user can click on Projects or Blog in the sidebar to navigate to the respective management pages. Clicking Settings in the sidebar takes the user to the preferences page. Every click triggers a client-side transition using the Next.js App Router so navigation is fast and seamless. 

## Detailed Feature Flows and Page Transitions
When the user selects Projects in the sidebar, the app navigates to /admin/projects. This page shows a table listing all existing projects with columns for title, date, and status. A prominent New Project button appears above the table. Clicking this button opens a form page at /admin/projects/new where the user fills in fields for project title, description, technologies used, and an optional image upload. Upon attaching an image file and hitting Save, the app sends a POST request to the API route at /api/projects/route.ts, where the request is authenticated using the Better Auth helper. The file upload API route processes the multipart form data, saves the file to cloud storage, and returns a URL. Once the file URL and metadata are saved in the database via Drizzle ORM, the user is redirected back to the project list, where the new item appears. If the user clicks on a project row, they navigate to /admin/projects/[id]/edit where the form is prefilled and allows editing the fields. Submitting this form fires a PUT request to the same API route to update the record. On the project list page, each row also includes a Delete action. When clicked, a confirmation dialog appears. Confirming sends a DELETE request to /api/projects/[id]/route.ts, and upon success the row is removed from the table. 

The blog management flow is analogous. Clicking Blog in the sidebar loads /admin/blog and displays a list of blog posts. The user can click New Post to go to /admin/blog/new where they fill in title, summary, content in a rich-text editor, and optionally upload a cover image. Saving creates a new blog entry via a POST request to /api/blog/route.ts. Editing and deleting posts follow the same pattern, using PUT and DELETE requests to routes under /api/blog. 

For public visitors, the application exposes two main pages. Navigating to /projects displays a server-rendered list of published projects using a responsive grid of cards. Each card shows an image, title, and short description. Visitors can click on a card to learn more or view additional details. Navigating to /blog lists published blog posts in reverse chronological order, each entry linking to a detailed view at /blog/[slug]. The contact page at /contact shows a form with name, email, and message fields. When a visitor submits the form, the client sends a POST request to /api/contact/route.ts. The API validates the input, stores the message in the ContactMessage table via Drizzle, and triggers an email via a mailer service. The visitor sees a success banner once the submission completes. 

## Settings and Account Management
The user can manage personal and application settings by clicking Settings in the admin sidebar. This opens /admin/settings where they find controls to update account information such as display name and password. To change the password, they enter their current password, set a new one, and submit. The request goes to an authenticated API route that validates the current credentials before updating. Below account fields, the user sees a theme preference section with a toggle switch for light or dark mode. Toggling updates the next-themes setting and persists the choice in localStorage so the preference is remembered across sessions. After saving any changes, the user remains on the Settings page, and a confirmation message appears at the top. A navigation link in the header allows the user to quickly return to the dashboard or any other section. 

## Error States and Alternate Paths
If a user attempts to access the admin routes without a valid session, they are automatically redirected to the sign-in page. Should they attempt to perform an API operation with invalid data, the server responds with validation errors. For example, submitting a project form without a title returns a 400 status and a message indicating the missing field. The frontend displays these errors inline next to the form fields. During file uploads, if the storage service is unreachable, the API returns a 500 error and the form shows a notification advising the user to retry. In case of network outages, the Next.js App Router surfaces a client-side error screen that prompts the visitor to check their connection and retry loading. If the contact form fails to send an email, the visitor sees a banner apologizing for the issue and asking them to try again later. On expired password-reset tokens, the reset form displays a message that the link is invalid or expired, with a button to request a new reset email. 

## Conclusion and Overall App Journey
From the moment a visitor arrives on the public landing page, they can explore projects, read blog posts, or send messages through the contact form. When authorized users need to manage content, they use the Admin link to sign up or sign in, recover passwords if necessary, and enter a secure admin dashboard. The dashboard provides clear navigation to manage projects, blog posts, and account settings, all backed by authenticated API routes. Throughout every step, the application handles errors gracefully, guiding users back to a normal flow. Whether publishing a new project, composing a blog post, or updating a theme preference, the user experiences a simple, consistent journey from start to finish, fulfilling the goal of a dynamic, full-stack portfolio application.